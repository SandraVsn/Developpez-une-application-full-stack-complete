<app-header></app-header>
@if(onError){
<span>An error occurred</span>
} @else if (!loaded) {
<span>Loading, please wait</span>
} @else {
<div class="p-5 md:p-12">
  <div class="flex items-center">
    <a class="-mt-3 -ms-4 md:-ms-12" mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </a>
    <p class="text-2xl font-semibold text-center">
      {{ post.title }}
    </p>
  </div>
  <div class="grid grid-cols-2 md:grid-cols-3">
    <p>{{ post.updatedAt }}</p>
    <p>{{ post.userName }}</p>
    <p>{{ post.topicName }}</p>
  </div>
  <p>{{ post.content }}</p>
  <div class="relative w-full">
    <div class="absolute inset-0 flex items-center" aria-hidden="true">
      <div class="w-full mx-5 border-t border-gray-300"></div>
    </div>
    <div class="relative flex justify-center">
      <span class="bg-white p-3 text-2xl font-semibold leading-6">
        Commentaires
      </span>
    </div>
  </div>
  @if(comments.length === 0){
  <p>Soyez le premier Ã  donner votre avis !</p>
  }@else { @for(comment of comments; track comment.id){
  <div class="flex flex-row-reverse md:flex-row">
    <p class="min-w-[20%] text-right pe-4 self-end md:self-start">
      {{ comment.userName }}
    </p>
    <p class="rounded-md md:bg-gray-200 md:min-h-20 p-2">
      {{ comment.content }}
    </p>
  </div>
  } }
  <form class="flex w-full" [formGroup]="form" (ngSubmit)="submit()">
    <mat-form-field class="w-full" appearance="outline">
      <textarea
        matNativeControl
        formControlName="content"
        placeholder="Ecrivez ici votre commentaire"
      ></textarea>
    </mat-form-field>
    <button type="submit" class="submit">
      <svg
        class="m-5 -mt-0"
        width="49"
        height="49"
        viewBox="0 0 49 49"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M45.9999 3L22.3499 26.65"
          stroke="#7763C5"
          stroke-width="5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M46 3L30.95 46L22.35 26.65L3 18.05L46 3Z"
          stroke="#7763C5"
          stroke-width="5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>
  </form>
</div>
}
